# EngLog Worker Server Production Environment
# Machine 2 Configuration

# Application
APP_ENV=production
WORKER_ID=englog-worker-01
WORKER_NAME=EngLog Production Worker
LOG_LEVEL=info

# gRPC Client Configuration (Connection to API Server)
GRPC_API_SERVER_ADDRESS=API_SERVER_IP:50051
GRPC_TLS_ENABLED=true
GRPC_CLIENT_CERT_FILE=/app/certs/client.crt
GRPC_CLIENT_KEY_FILE=/app/certs/client.key
GRPC_CA_CERT_FILE=/app/certs/ca.crt
GRPC_SERVER_NAME=api-server

# Worker Configuration
MAX_CONCURRENT_TASKS=5
TASK_TIMEOUT=300s
HEARTBEAT_INTERVAL=30s
RECONNECT_INTERVAL=10s
MAX_RECONNECT_ATTEMPTS=10

# Ollama Configuration
OLLAMA_URL=http://ollama:11434
OLLAMA_MODEL_CHAT=llama3.2:3b
OLLAMA_MODEL_CODE=codellama:7b
OLLAMA_TIMEOUT=120s
OLLAMA_MAX_RETRIES=3

# Task Processing
TASK_QUEUE_SIZE=100
TASK_RETRY_ATTEMPTS=3
TASK_RETRY_DELAY=30s

# AI Service Configuration
AI_CONFIDENCE_THRESHOLD=0.7
AI_MAX_CONTEXT_LENGTH=4000
AI_TEMPERATURE=0.7
AI_MAX_TOKENS=2000

# Health Check
HEALTH_PORT=8091
HEALTH_CHECK_INTERVAL=30s

# Logging
LOG_FORMAT=json
LOG_FILE=/app/logs/worker.log
LOG_MAX_SIZE=100MB
LOG_MAX_BACKUPS=5
LOG_MAX_AGE=30

# Monitoring
METRICS_ENABLED=true
METRICS_PORT=9091

# Performance Tuning
GOMAXPROCS=0
WORKER_POOL_SIZE=10
MEMORY_LIMIT=2GB

# Background Jobs
CLEANUP_INTERVAL=24h
REPORT_GENERATION_SCHEDULE=0 9 * * 1  # Every Monday at 9 AM

# Security
TLS_MIN_VERSION=1.2
CIPHER_SUITES=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305

# Database Access (Read-only for analytics)
DB_HOST_READ_ONLY=API_SERVER_IP:5432
DB_NAME=englog
DB_USER=englog_readonly
DB_PASSWORD=CHANGE_THIS_READONLY_PASSWORD
